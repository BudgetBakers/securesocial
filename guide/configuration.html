<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>SecureSocial - Authentication for Play Framework Applications</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">
<!-- Le styles --><link href="../stylesheets/bootstrap.min.css" media="screen" rel="stylesheet" type="text/css">
<link href="../stylesheets/bootstrap-responsive.min.css" media="screen" rel="stylesheet" type="text/css">
<link href="../stylesheets/pygment.css" media="screen" rel="stylesheet" type="text/css">
<link href="../stylesheets/main.css" media="screen" rel="stylesheet" type="text/css">
<style type="text/css">
      body {
        padding-top: 20px;        
      }
    </style>
<!-- HTML5 shim, for IE6-8 support of HTML5 elements --><!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body>
    <div id="wrap">
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../">SecureSocial</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
<li><a href="../">Home</a></li>
              <li class="active"><a href="getting-started.html">Getting Started</a></li>
              <!--li ><a href="../sponsors.html">Sponsors</a></li-->
              <li><a href="https://groups.google.com/forum/#!forum/securesocial" target="_blank">Forum</a></li>
              <li><a href="../support.html">Support</a></li>
              <li><a href="https://github.com/jaliss/securesocial" target="_blank">View on Github</a></li>                            
            </ul>
</div>
<!--/.nav-collapse -->
        </div>
      </div>
    </div>


    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span3">
          <div class="sidebar-nav">
  <ul class="nav nav-list">
<li class="nav-header">Contents</li>
        
    	<li>
    		<a href="getting-started.html">Getting Started</a> 
    	</li>
   	    
    	<li>
    		<a href="installation.html">Installation</a> 
    	</li>
   	    
    	<li class="active">
    		<a href="configuration.html">Configuration</a> 
    	</li>
   	    
    	<li>
    		<a href="securing.html">Securing your Actions</a> 
    	</li>
   	    
    	<li>
    		<a href="authorization.html">Adding Authorization</a> 
    	</li>
   	    
    	<li>
    		<a href="user-service.html">UserService</a> 
    	</li>
   	    
    	<li>
    		<a href="views-customization.html">Views and Emails Customization</a> 
    	</li>
   	    
    	<li>
    		<a href="password-change.html">Password Change Page</a> 
    	</li>
   	    
    	<li>
    		<a href="password-plugins.html">Password Plugins</a> 
    	</li>
   	    
    	<li>
    		<a href="events.html">Events</a> 
    	</li>
   	    
    	<li>
    		<a href="faqs.html">FAQs</a> 
    	</li>
   	    
    	<li>
    		<a href="changelog.html">Change Log</a> 
    	</li>
   	
    </ul>
</div>     
        </div>

        <div class="span9">                   
              <h1 id="configuration">Configuration</h1>

<p>Create a <code>securesocial.conf</code> file within your app's conf directory and include it from your <code>application.conf</code> file.  Eg:</p>

<div class="highlight"><pre>include <span class="s2">"securesocial.conf"</span>
</pre></div>

<h2 id="mail-settings">Mail settings</h2>

<p>If you plan to use the <code>UsernamePasswordProvider</code> you need to configure your mail service. SecureSocial uses the <a href="https://github.com/typesafehub/play-plugins/tree/master/mailer">mailer plugin</a> from Typesafe.</p>

<p>These settings go in the <code>smtp</code> section of the <code>securesocial.conf</code> file:</p>

<div class="highlight"><pre>smtp <span class="o">{</span>
	<span class="nv">host</span><span class="o">=</span>smtp.gmail.com
	<span class="c">#port=25</span>
	<span class="nv">ssl</span><span class="o">=</span><span class="nb">true</span>
<span class="nb">	</span><span class="nv">user</span><span class="o">=</span><span class="s2">"your_user"</span>
	<span class="nv">password</span><span class="o">=</span>your_password
	<span class="nv">from</span><span class="o">=</span><span class="s2">"your_from_address"</span>
<span class="o">}</span>
</pre></div>

<h2 id="global-settings">Global Settings</h2>

<ul>
<li>
    <p><code>onLoginGoTo</code>: SecureSocial tries to redirect the user back to the page they intended to access after login.  There are cases where this can't be done (eg: the user tried to POST a form) or accessed the login page directly.  Adding the <code>onLoginGoto</code> property allows SecureSocial to redirect the user to the page you need.  </p>
  </li>
  <li>
    <p><code>onLogoutGoTo</code>: The page where the user is redirected to after logging out.</p>
  </li>
  <li>
    <p><code>onStartSignUpGoTo</code>: The page where the user is redirected to after sign up was started (form with email address was submitted/processed)</p>
  </li>
  <li>
    <p><code>onSignUpGoTo</code>: The page where the user is redirected to after sign-up was completed (full sign up form was submitted/processed)</p>
  </li>
  <li>
    <p><code>onStartResetPasswordGoTo</code>: The page where the user is redirected to after password reset was started (form with email address was submitted/processed)</p>
  </li>
  <li>
    <p><code>onResetPasswordGoTo</code>: The page where the user is redirected to after the password was reset (reset password form was submitted/processed)</p>
  </li>
  <li>
    <p><code>onPasswordChangeGoTo</code>: The page where the user is redirected to after the password was changed (change password form was submitted/processed)</p>
  </li>
  <li>
    <p><code>ssl</code>: You can enable SSL for OAuth callbacks, the login, signup and reset password actions of the <code>UsernamePasswordProvider</code> and for the cookie used to trace users (you'll want this in production mode).</p>
  </li>
  <li>
    <p><code>assetsController</code>: This setting is optional.  It is only needed if you are not using the default Assets controller provided by Play.  The value must be the full qualified class name of your controller prepended by the word Reverse.</p>
  </li>
  <li>
    <p><code>assetsPath</code>: If your application has multiple assets configured specify the path that should be used for SecureSocial.  It defaults to '/public'.</p>
  </li>
  <li>
    <p><code>idLengthInBytes</code>: The length in bytes of the id that will be used to track user sessions. This setting is used by the <code>DefaultGeneratorId</code> plugin. Defaults to 128 bytes.</p>
  </li>
</ul>
<h2 id="authenticator-cookie">Authenticator Cookie</h2>

<p>SecureSocial uses a cookie to trace authenticated users.  A <code>cookie</code> section can be added to customize it with the following properties:</p>

<ul>
<li>
    <p><code>name</code>: The cookie name (defaults to 'id').</p>
  </li>
  <li>
    <p><code>path</code>: The path for which the cookie should be sent by the browser (defaults to /)</p>
  </li>
  <li>
    <p><code>domain</code>: The domain for which the cookie should be sent (it is left empty by default)</p>
  </li>
  <li>
    <p><code>httpOnly</code>: If set to true, the cookie is not readable by a client side script (defaults to true).</p>
  </li>
  <li>
    <p><code>idleTimeoutInMinutes</code>: The amount of time the session id will remain valid since the last request (defaults to 30).</p>
  </li>
  <li>
    <p><code>absoluteTimeoutInMinutes</code>: The amount of time the session id will be valid since the user authenticated. After this the user will need to re-authenticate (defaults to 720 minutes - 12 hours)</p>
  </li>
  <li>
    <p><code>makeTransient</code>: Makes the cookie transient (defaults to true). Transient cookie are recommended because the cookie dissapears when the browser is closed.  If set to false, the cookie will survive browser restarts and the user won't need to login again (as long as the idle and absolute timeouts have not been passed).</p>
  </li>
</ul>
<h2 id="sample-configuration">Sample configuration</h2>

<p>All the settings go inside a <code>securesocial</code> section as shown below:</p>

<div class="highlight"><pre>securesocial <span class="o">{</span>
	<span class="c">#</span>
	<span class="c"># Where to redirect the user if SecureSocial can't figure that out from</span>
	<span class="c"># the request that was received before authenticating the user</span>
	<span class="c">#</span>
	<span class="nv">onLoginGoTo</span><span class="o">=</span>/

	<span class="c">#</span>
	<span class="c"># Where to redirect the user when he logs out. If not set SecureSocial will redirect to the login page</span>
	<span class="c">#</span>
	<span class="nv">onLogoutGoTo</span><span class="o">=</span>/login

	<span class="c">#</span>
	<span class="c"># Enable SSL </span>
	<span class="c">#</span>
	<span class="nv">ssl</span><span class="o">=</span><span class="nb">false</span>	

	<span class="c">#</span>
	<span class="c"># The controller class for assets. This is optional, only required</span>
	<span class="c"># when you use a custom class for Assets.</span>
	<span class="c">#</span>
	<span class="nv">assetsController</span><span class="o">=</span>controllers.ReverseMyCustomAssetsController

	 cookie <span class="o">{</span>
            <span class="c">#name=id</span>
            <span class="c">#path=/</span>
            <span class="c">#domain=some_domain</span>
            <span class="c">#httpOnly=true</span>
            <span class="c">#idleTimeoutInMinutes=30</span>
            <span class="c">#absoluteTimeoutInMinutes=720</span>
    <span class="o">}</span>
       
<span class="o">}</span>
</pre></div>

<h2 id="provider-settings">Provider settings</h2>

<p>The configuration for each provider needs to be added within the <code>securesocial</code> section as well. </p>

<h3 id="username-passsword-provider">Username Passsword Provider</h3>

<p>The following properties can be configured:</p>

<ul>
<li>
    <p><code>withUserNameSupport</code>: depending on your app you can decide to use email addresses or usernames for login.  When this setting is set to <code>false</code>, the username field will be hidden in the sign up form and the email address/password combination will be used to authenticate the user.  When set to <code>true</code> usernames will be used.</p>
  </li>
  <li>
    <p><code>sendWelcomeEmail</code>: if set to <code>true</code> a welcome email will be sent to users after sign up.</p>
  </li>
  <li>
    <p><code>enableGravatarSupport</code>: if set to <code>true</code> Gravatar will be used to retrieve a profile image for the user.  If set to <code>false</code> it will be left empty.</p>
  </li>
  <li>
    <p><code>signupSkipLogin</code>: if set to <code>true</code>, the user will be automatically signed in when they complete sign up. If set to <code>false</code> the user will have to sign in after registering. Username/password only.</p>
  </li>
  <li>
    <p><code>tokenDuration</code>: Every time a user signs up or attempts a password reset SecureSocial will generate a token that identifies that request.  Each token has an expiration date and this property is used to compute it. This value is expressed in <strong>minutes</strong> and is set to 60 by default.</p>
  </li>
  <li>
    <p><code>tokenDeleteInterval</code>: This property defines how often the <code>deleteExpiredTokens()</code> method in <code>UserService</code> gets called. This value is expressed in <strong>minutes</strong> and is set to 5 by default.</p>
  </li>
  <li>
    <p><code>minimumPasswordLength</code>: Defines the minimum password length the user can enter. Defaults to 6 if not specified. </p>
  </li>
  <li>
    <p><code>enableTokenJob</code>: Enables/disables the background job used to delete sign up and reset password tokens.</p>
  </li>
  <li>
    <p><code>hasher</code>: Specifies the current password hasher. </p>
  </li>
</ul>
<p>For example:</p>

<div class="highlight"><pre>userpass <span class="o">{</span>		
	<span class="nv">withUserNameSupport</span><span class="o">=</span><span class="nb">false</span>
<span class="nb">	</span><span class="nv">sendWelcomeEmail</span><span class="o">=</span><span class="nb">true</span>
<span class="nb">	</span><span class="nv">enableGravatarSupport</span><span class="o">=</span><span class="nb">true</span>
<span class="nb">	</span><span class="nv">signupSkipLogin</span><span class="o">=</span><span class="nb">true</span>
<span class="nb">	</span><span class="nv">tokenDuration</span><span class="o">=</span>60
	<span class="nv">tokenDeleteInterval</span><span class="o">=</span>5
	<span class="nv">minimumPasswordLength</span><span class="o">=</span>8
	<span class="nv">enableTokenJob</span><span class="o">=</span><span class="nb">true</span>
<span class="nb">	</span><span class="nv">hasher</span><span class="o">=</span>bcrypt
<span class="o">}</span>
</pre></div>

<h3 id="oauth-based-providers">OAuth based Providers</h3>

<p>The configuration for these providers is simple, just specify the endpoints and OAuth values generated by the external service.</p>

<p>A configuration would look like:</p>

<div class="highlight"><pre>twitter <span class="o">{</span>
	<span class="nv">requestTokenUrl</span><span class="o">=</span><span class="s2">"https://twitter.com/oauth/request_token"</span>
	<span class="nv">accessTokenUrl</span><span class="o">=</span><span class="s2">"https://twitter.com/oauth/access_token"</span>
	<span class="nv">authorizationUrl</span><span class="o">=</span><span class="s2">"https://twitter.com/oauth/authenticate"</span>
	<span class="nv">consumerKey</span><span class="o">=</span>your_consumer_key
	<span class="nv">consumerSecret</span><span class="o">=</span>your_consumer_secret
<span class="o">}</span>

facebook <span class="o">{</span>
	<span class="nv">authorizationUrl</span><span class="o">=</span><span class="s2">"https://graph.facebook.com/oauth/authorize"</span>
	<span class="nv">accessTokenUrl</span><span class="o">=</span><span class="s2">"https://graph.facebook.com/oauth/access_token"</span>
	<span class="nv">clientId</span><span class="o">=</span>your_client_id
	<span class="nv">clientSecret</span><span class="o">=</span>your_client_secret
	<span class="c"># this scope is the minimum SecureSocial requires.  You can add more if required by your app.</span>
	<span class="nv">scope</span><span class="o">=</span>email
<span class="o">}</span>

google <span class="o">{</span>
	<span class="nv">authorizationUrl</span><span class="o">=</span><span class="s2">"https://accounts.google.com/o/oauth2/auth"</span>
	<span class="nv">accessTokenUrl</span><span class="o">=</span><span class="s2">"https://accounts.google.com/o/oauth2/token"</span>
	<span class="nv">clientId</span><span class="o">=</span>your_client_id
	<span class="nv">clientSecret</span><span class="o">=</span>your_client_secret
	<span class="nv">scope</span><span class="o">=</span><span class="s2">"https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email"</span>
<span class="o">}</span>

linkedin <span class="o">{</span>
	<span class="nv">requestTokenUrl</span><span class="o">=</span><span class="s2">"https://api.linkedin.com/uas/oauth/requestToken"</span>
	<span class="nv">accessTokenUrl</span><span class="o">=</span><span class="s2">"https://api.linkedin.com/uas/oauth/accessToken"</span>
	<span class="nv">authorizationUrl</span><span class="o">=</span><span class="s2">"https://api.linkedin.com/uas/oauth/authenticate"</span>
	<span class="nv">consumerKey</span><span class="o">=</span>your_consumer_key
	<span class="nv">consumerSecret</span><span class="o">=</span>your_consumer_secret
<span class="o">}</span>
	
github <span class="o">{</span>
	<span class="nv">authorizationUrl</span><span class="o">=</span><span class="s2">"https://github.com/login/oauth/authorize"</span>
	<span class="nv">accessTokenUrl</span><span class="o">=</span><span class="s2">"https://github.com/login/oauth/access_token"</span>
	<span class="nv">clientId</span><span class="o">=</span>your_client_id
	<span class="nv">clientSecret</span><span class="o">=</span>your_client_secret
<span class="o">}</span>

foursquare <span class="o">{</span>
	<span class="nv">authorizationUrl</span><span class="o">=</span><span class="s2">"https://foursquare.com/oauth2/authenticate"</span>
    <span class="nv">accessTokenUrl</span><span class="o">=</span><span class="s2">"https://foursquare.com/oauth2/access_token"</span>
	<span class="nv">clientId</span><span class="o">=</span>your_client_id
	<span class="nv">clientSecret</span><span class="o">=</span>your_client_secret
<span class="o">}</span>

xing <span class="o">{</span>
 	<span class="nv">requestTokenUrl</span><span class="o">=</span><span class="s2">"https://api.xing.com/v1/request_token"</span>
	<span class="nv">accessTokenUrl</span><span class="o">=</span><span class="s2">"https://api.xing.com/v1/access_token"</span>
    <span class="nv">authorizationUrl</span><span class="o">=</span><span class="s2">"https://api.xing.com/v1/authorize"</span>
	<span class="nv">consumerKey</span><span class="o">=</span>your_consumer_key
	<span class="nv">consumerSecret</span><span class="o">=</span>your_consumer_secret
<span class="o">}</span>

instagram <span class="o">{</span>
    <span class="nv">authorizationUrl</span><span class="o">=</span><span class="s2">"https://api.instagram.com/oauth/authorize"</span>
  	<span class="nv">accessTokenUrl</span><span class="o">=</span><span class="s2">"https://api.instagram.com/oauth/access_token"</span>
	<span class="nv">clientId</span><span class="o">=</span>your_client_id
	<span class="nv">clientSecret</span><span class="o">=</span>your_client_secret
<span class="o">}</span>

vk <span class="o">{</span>
    <span class="nv">authorizationUrl</span><span class="o">=</span><span class="s2">"http://oauth.vk.com/authorize"</span>
    <span class="nv">accessTokenUrl</span><span class="o">=</span><span class="s2">"https://oauth.vk.com/access_token"</span>
	<span class="nv">clientId</span><span class="o">=</span>your_client_id
	<span class="nv">clientSecret</span><span class="o">=</span>your_client_secret
<span class="o">}</span>
</pre></div>

<p>To get the <code>clientId</code>/<code>clientSecret</code> or <code>consumerKey</code>/<code>consumerSecret</code> keys you need to log into the developer site of each service (eg: Twitter, Facebook) and register your application.</p>

<p><em>Hint: you can use the <code>securesocial.conf</code> file in the sample apps as a starting point.</em></p>

<h2 id="clustered-environments">Clustered environments</h2>

<p>SecureSocial uses the Play cache to store values while signing in users via OAuth.  If you have more than one server then make sure to use a distributed cache (eg: memcached).</p>
            
        </div>
      </div>    
    </div>
    <div id="push"></div>
    </div>
    <div id="footer">
	<div class="container">
		<p> <a href="https://github.com/jaliss/securesocial">View on Github</a></p>        
        <p>Designed and developed by <a href="http://twitter.com/jaliss" target="_blank">@jaliss</a>.</p>
        <p>Code licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache License v2.0</a>, documentation under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.</p>
        <p>© 2011-2013 Jorge Aliss       
    </p>
</div>
       
</div>
      
    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1441023-12']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>
