<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>SecureSocial - Authentication for Play Framework Applications</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">
<!-- Le styles --><link href="../stylesheets/bootstrap.min.css" media="screen" rel="stylesheet" type="text/css">
<link href="../stylesheets/bootstrap-responsive.min.css" media="screen" rel="stylesheet" type="text/css">
<link href="../stylesheets/pygment.css" media="screen" rel="stylesheet" type="text/css">
<link href="../stylesheets/main.css" media="screen" rel="stylesheet" type="text/css">
<style type="text/css">
      body {
        padding-top: 20px;        
      }
    </style>
<!-- HTML5 shim, for IE6-8 support of HTML5 elements --><!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body>
    <div id="wrap">
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../">SecureSocial</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
<li><a href="../">Home</a></li>
              <li class="active"><a href="getting-started.html">Getting Started</a></li>
              <!--li ><a href="../sponsors.html">Sponsors</a></li-->
              <li><a href="https://groups.google.com/forum/#!forum/securesocial" target="_blank">Forum</a></li>
              <li><a href="../support.html">Support</a></li>
              <li><a href="https://github.com/jaliss/securesocial" target="_blank">View on Github</a></li>                            
            </ul>
</div>
<!--/.nav-collapse -->
        </div>
      </div>
    </div>


    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span3">
          <div class="sidebar-nav">
  <ul class="nav nav-list">
<li class="nav-header">Contents</li>
        
    	<li>
    		<a href="getting-started.html">Getting Started</a> 
    	</li>
   	    
    	<li>
    		<a href="installation.html">Installation</a> 
    	</li>
   	    
    	<li>
    		<a href="configuration.html">Configuration</a> 
    	</li>
   	    
    	<li>
    		<a href="securing.html">Securing your Actions</a> 
    	</li>
   	    
    	<li>
    		<a href="authorization.html">Adding Authorization</a> 
    	</li>
   	    
    	<li>
    		<a href="user-service.html">UserService</a> 
    	</li>
   	    
    	<li class="active">
    		<a href="views-customization.html">Views and Emails Customization</a> 
    	</li>
   	    
    	<li>
    		<a href="password-change.html">Password Change Page</a> 
    	</li>
   	    
    	<li>
    		<a href="password-plugins.html">Password Plugins</a> 
    	</li>
   	    
    	<li>
    		<a href="events.html">Events</a> 
    	</li>
   	    
    	<li>
    		<a href="faqs.html">FAQs</a> 
    	</li>
   	    
    	<li>
    		<a href="changelog.html">Change Log</a> 
    	</li>
   	
    </ul>
</div>     
        </div>

        <div class="span9">                   
              <h1 id="views-and-email-customization">Views and Email Customization</h1>

<h2 id="customizing-securesocial-static-files">Customizing SecureSocial Static Files</h2>

<p>SecureSocial allows you to modify the paths used to access some of its static resources, like <code>JQuery</code> or <code>Bootstrap</code>, so you can load your own modified files. Using this feature you can ensure that both SecureSocial and your application run the same versions of the libraries or apply minor style changes without using <code>TemplatesPlugin</code>.</p>

<p>To modify a static file you just need to add a value in the configuration file indicating the path of the file to be used. SecureSocial will detect that and use your file. If a configuration key is missing then the default file included by SecureSocial will be used.</p>

<p>You can use the following configuration keys:</p>

<ol>
<li>
<code>securesocial.bootstrapCssPath</code>: the path to your own version of Bootstrap's CSS file. </li>
  <li>
<code>securesocial.faviconPath</code>: the path to your own Favicon, to be displayed while in SecureSocial pages</li>
  <li>
<code>securesocial.jqueryPath</code>: the path to your own version of JQuery</li>
</ol>
<p>There is an additional configuration entry: <code>securesocial.customCssPath</code>. If you provide a path to a CSS file, this file will be injected into all SecureSocial pages. This allows you to apply some customization to SecureSocial components without having to create a full set of templates. By default no file is injected.</p>

<h2 id="customizing-securesocial-templates">Customizing SecureSocial Templates</h2>

<p>SecureSocial uses a <code>TemplatesPlugin</code> implementation to render the login, signup and password reset pages and generate the text/email content that is sent by the <code>UsernamePasswordProvider</code>. </p>

<p>The module comes with a default implementation named <code>DefaultTemplatesPlugin</code> that you can replace with your own to change the generated html.</p>

<p>To create custom pages:</p>

<ol>
<li>Create a new directory under <code>views</code> to place the custom templates for SecureSocial.</li>
  <li>Create a new plugin that implements the <code>TemplatesPlugin</code> trait and renders those templates.</li>
  <li>Edit the <code>play.plugins</code> file and replace <code>DefaultPluginsTemplate</code> with your own class.</li>
</ol>
<p>For example, if the custom templates were placed in the <code>views/custom</code> directory your plugin would look like:</p>

<div class="highlight"><pre><span class="k">class</span> <span class="nc">MyViews</span><span class="o">(</span><span class="n">application</span><span class="k">:</span> <span class="kt">play.Application</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">TemplatesPlugin</span> 
<span class="o">{</span>
 <span class="cm">/**</span>
<span class="cm">   * Returns the html for the login page</span>
<span class="cm">   * @param request</span>
<span class="cm">   * @tparam A</span>
<span class="cm">   * @return</span>
<span class="cm">   */</span>
  <span class="k">override</span> <span class="k">def</span> <span class="n">getLoginPage</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="k">implicit</span> <span class="n">request</span><span class="k">:</span> <span class="kt">Request</span><span class="o">[</span><span class="kt">A</span><span class="o">],</span> <span class="n">form</span><span class="k">:</span> <span class="kt">Form</span><span class="o">[(</span><span class="kt">String</span>, <span class="kt">String</span><span class="o">)],</span>
                               <span class="n">msg</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span> <span class="k">=</span> <span class="nc">None</span><span class="o">)</span><span class="k">:</span> <span class="kt">Html</span> <span class="o">=</span>
  <span class="o">{</span>
    <span class="n">views</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">custom</span><span class="o">.</span><span class="n">login</span><span class="o">(</span><span class="n">form</span><span class="o">,</span> <span class="n">msg</span><span class="o">)</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * Returns the html for the signup page</span>
<span class="cm">   *</span>
<span class="cm">   * @param request</span>
<span class="cm">   * @tparam A</span>
<span class="cm">   * @return</span>
<span class="cm">   */</span>
  <span class="k">override</span> <span class="k">def</span> <span class="n">getSignUpPage</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="k">implicit</span> <span class="n">request</span><span class="k">:</span> <span class="kt">Request</span><span class="o">[</span><span class="kt">A</span><span class="o">],</span> <span class="n">form</span><span class="k">:</span> <span class="kt">Form</span><span class="o">[</span><span class="kt">RegistrationInfo</span><span class="o">],</span> <span class="n">token</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Html</span> <span class="o">=</span> <span class="o">{</span>
    <span class="n">views</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">custom</span><span class="o">.</span><span class="nc">Registration</span><span class="o">.</span><span class="n">signUp</span><span class="o">(</span><span class="n">form</span><span class="o">,</span> <span class="n">token</span><span class="o">)</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * Returns the html for the start signup page</span>
<span class="cm">   *</span>
<span class="cm">   * @param request</span>
<span class="cm">   * @tparam A</span>
<span class="cm">   * @return</span>
<span class="cm">   */</span>
  <span class="k">override</span> <span class="k">def</span> <span class="n">getStartSignUpPage</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="k">implicit</span> <span class="n">request</span><span class="k">:</span> <span class="kt">Request</span><span class="o">[</span><span class="kt">A</span><span class="o">],</span> <span class="n">form</span><span class="k">:</span> <span class="kt">Form</span><span class="o">[</span><span class="kt">String</span><span class="o">])</span><span class="k">:</span> <span class="kt">Html</span> <span class="o">=</span> <span class="o">{</span>
    <span class="n">views</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">custom</span><span class="o">.</span><span class="nc">Registration</span><span class="o">.</span><span class="n">startSignUp</span><span class="o">(</span><span class="n">form</span><span class="o">)</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * Returns the html for the reset password page</span>
<span class="cm">   *</span>
<span class="cm">   * @param request</span>
<span class="cm">   * @tparam A</span>
<span class="cm">   * @return</span>
<span class="cm">   */</span>
  <span class="k">override</span> <span class="k">def</span> <span class="n">getStartResetPasswordPage</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="k">implicit</span> <span class="n">request</span><span class="k">:</span> <span class="kt">Request</span><span class="o">[</span><span class="kt">A</span><span class="o">],</span> <span class="n">form</span><span class="k">:</span> <span class="kt">Form</span><span class="o">[</span><span class="kt">String</span><span class="o">])</span><span class="k">:</span> <span class="kt">Html</span> <span class="o">=</span> <span class="o">{</span>
    <span class="n">views</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">custom</span><span class="o">.</span><span class="nc">Registration</span><span class="o">.</span><span class="n">startResetPassword</span><span class="o">(</span><span class="n">form</span><span class="o">)</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * Returns the html for the start reset page</span>
<span class="cm">   *</span>
<span class="cm">   * @param request</span>
<span class="cm">   * @tparam A</span>
<span class="cm">   * @return</span>
<span class="cm">   */</span>
  <span class="k">def</span> <span class="n">getResetPasswordPage</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="k">implicit</span> <span class="n">request</span><span class="k">:</span> <span class="kt">Request</span><span class="o">[</span><span class="kt">A</span><span class="o">],</span> <span class="n">form</span><span class="k">:</span> <span class="kt">Form</span><span class="o">[(</span><span class="kt">String</span>, <span class="kt">String</span><span class="o">)],</span> <span class="n">token</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span><span class="k">:</span> <span class="kt">Html</span> <span class="o">=</span> <span class="o">{</span>
    <span class="n">views</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">custom</span><span class="o">.</span><span class="nc">Registration</span><span class="o">.</span><span class="n">resetPasswordPage</span><span class="o">(</span><span class="n">form</span><span class="o">,</span> <span class="n">token</span><span class="o">)</span>
  <span class="o">}</span>

   <span class="cm">/**</span>
<span class="cm">   * Returns the html for the change password page</span>
<span class="cm">   *</span>
<span class="cm">   * @param request</span>
<span class="cm">   * @param form</span>
<span class="cm">   * @tparam A</span>
<span class="cm">   * @return</span>
<span class="cm">   */</span>
  <span class="k">def</span> <span class="n">getPasswordChangePage</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="k">implicit</span> <span class="n">request</span><span class="k">:</span> <span class="kt">SecuredRequest</span><span class="o">[</span><span class="kt">A</span><span class="o">],</span> <span class="n">form</span><span class="k">:</span> <span class="kt">Form</span><span class="o">[</span><span class="kt">ChangeInfo</span><span class="o">])</span><span class="k">:</span> <span class="kt">Html</span> <span class="o">=</span> <span class="o">{</span>
	<span class="n">views</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">custom</span><span class="o">.</span><span class="n">passwordChange</span><span class="o">(</span><span class="n">form</span><span class="o">)</span>	  	
  <span class="o">}</span>


  <span class="cm">/**</span>
<span class="cm">   * Returns the email sent when a user starts the sign up process</span>
<span class="cm">   *</span>
<span class="cm">   * @param token the token used to identify the request</span>
<span class="cm">   * @param request the current http request</span>
<span class="cm">   * @return a String with the text and/or html body for the email</span>
<span class="cm">   */</span>
  <span class="k">def</span> <span class="n">getSignUpEmail</span><span class="o">(</span><span class="n">token</span><span class="k">:</span> <span class="kt">String</span><span class="o">)(</span><span class="k">implicit</span> <span class="n">request</span><span class="k">:</span> <span class="kt">RequestHeader</span><span class="o">)</span><span class="k">:</span> <span class="o">(</span><span class="kt">Option</span><span class="o">[</span><span class="kt">Txt</span><span class="o">],</span> <span class="nc">Option</span><span class="o">[</span><span class="kt">Html</span><span class="o">])</span> <span class="k">=</span> <span class="o">{</span>
    <span class="o">(</span><span class="nc">None</span><span class="o">,</span> <span class="nc">Some</span><span class="o">(</span><span class="n">views</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">custom</span><span class="o">.</span><span class="n">mails</span><span class="o">.</span><span class="n">signUpEmail</span><span class="o">(</span><span class="n">token</span><span class="o">)))</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * Returns the email sent when the user is already registered</span>
<span class="cm">   *</span>
<span class="cm">   * @param user the user</span>
<span class="cm">   * @param request the current request</span>
<span class="cm">   * @return a String with the text and/or html body for the email</span>
<span class="cm">   */</span>
  <span class="k">def</span> <span class="n">getAlreadyRegisteredEmail</span><span class="o">(</span><span class="n">user</span><span class="k">:</span> <span class="kt">Identity</span><span class="o">)(</span><span class="k">implicit</span> <span class="n">request</span><span class="k">:</span> <span class="kt">RequestHeader</span><span class="o">)</span><span class="k">:</span> <span class="o">(</span><span class="kt">Option</span><span class="o">[</span><span class="kt">Txt</span><span class="o">],</span> <span class="nc">Option</span><span class="o">[</span><span class="kt">Html</span><span class="o">])</span> <span class="k">=</span> <span class="o">{</span>
    <span class="o">(</span><span class="nc">None</span><span class="o">,</span> <span class="nc">Some</span><span class="o">(</span><span class="n">views</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">custom</span><span class="o">.</span><span class="n">mails</span><span class="o">.</span><span class="n">alreadyRegisteredEmail</span><span class="o">(</span><span class="n">user</span><span class="o">)))</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * Returns the welcome email sent when the user finished the sign up process</span>
<span class="cm">   *</span>
<span class="cm">   * @param user the user</span>
<span class="cm">   * @param request the current request</span>
<span class="cm">   * @return a String with the text and/or html body for the email</span>
<span class="cm">   */</span>
  <span class="k">def</span> <span class="n">getWelcomeEmail</span><span class="o">(</span><span class="n">user</span><span class="k">:</span> <span class="kt">Identity</span><span class="o">)(</span><span class="k">implicit</span> <span class="n">request</span><span class="k">:</span> <span class="kt">RequestHeader</span><span class="o">)</span><span class="k">:</span> <span class="o">(</span><span class="kt">Option</span><span class="o">[</span><span class="kt">Txt</span><span class="o">],</span> <span class="nc">Option</span><span class="o">[</span><span class="kt">Html</span><span class="o">])</span> <span class="k">=</span> <span class="o">{</span>
    <span class="o">(</span><span class="nc">None</span><span class="o">,</span> <span class="nc">Some</span><span class="o">(</span><span class="n">views</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">custom</span><span class="o">.</span><span class="n">mails</span><span class="o">.</span><span class="n">welcomeEmail</span><span class="o">(</span><span class="n">user</span><span class="o">)))</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * Returns the email sent when a user tries to reset the password but there is no account for</span>
<span class="cm">   * that email address in the system</span>
<span class="cm">   *</span>
<span class="cm">   * @param request the current request</span>
<span class="cm">   * @return a String with the text and/or html body for the email</span>
<span class="cm">   */</span>
  <span class="k">def</span> <span class="n">getUnknownEmailNotice</span><span class="o">()(</span><span class="k">implicit</span> <span class="n">request</span><span class="k">:</span> <span class="kt">RequestHeader</span><span class="o">)</span><span class="k">:</span> <span class="o">(</span><span class="kt">Option</span><span class="o">[</span><span class="kt">Txt</span><span class="o">],</span> <span class="nc">Option</span><span class="o">[</span><span class="kt">Html</span><span class="o">])</span> <span class="k">=</span> <span class="o">{</span>
    <span class="o">(</span><span class="nc">None</span><span class="o">,</span> <span class="nc">Some</span><span class="o">(</span><span class="n">views</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">custom</span><span class="o">.</span><span class="n">mails</span><span class="o">.</span><span class="n">unknownEmailNotice</span><span class="o">(</span><span class="n">request</span><span class="o">)))</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * Returns the email sent to the user to reset the password</span>
<span class="cm">   *</span>
<span class="cm">   * @param user the user</span>
<span class="cm">   * @param token the token used to identify the request</span>
<span class="cm">   * @param request the current http request</span>
<span class="cm">   * @return a String with the text and/or html body for the email</span>
<span class="cm">   */</span>
  <span class="k">def</span> <span class="n">getSendPasswordResetEmail</span><span class="o">(</span><span class="n">user</span><span class="k">:</span> <span class="kt">Identity</span><span class="o">,</span> <span class="n">token</span><span class="k">:</span> <span class="kt">String</span><span class="o">)(</span><span class="k">implicit</span> <span class="n">request</span><span class="k">:</span> <span class="kt">RequestHeader</span><span class="o">)</span><span class="k">:</span> <span class="o">(</span><span class="kt">Option</span><span class="o">[</span><span class="kt">Txt</span><span class="o">],</span> <span class="nc">Option</span><span class="o">[</span><span class="kt">Html</span><span class="o">])</span> <span class="k">=</span> <span class="o">{</span>
    <span class="o">(</span><span class="nc">None</span><span class="o">,</span> <span class="nc">Some</span><span class="o">(</span><span class="n">views</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">custom</span><span class="o">.</span><span class="n">mails</span><span class="o">.</span><span class="n">passwordResetEmail</span><span class="o">(</span><span class="n">user</span><span class="o">,</span> <span class="n">token</span><span class="o">)))</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * Returns the email sent as a confirmation of a password change</span>
<span class="cm">   *</span>
<span class="cm">   * @param user the user</span>
<span class="cm">   * @param request the current http request</span>
<span class="cm">   * @return a String with the text and/or html body for the email</span>
<span class="cm">   */</span>
  <span class="k">def</span> <span class="n">getPasswordChangedNoticeEmail</span><span class="o">(</span><span class="n">user</span><span class="k">:</span> <span class="kt">Identity</span><span class="o">)(</span><span class="k">implicit</span> <span class="n">request</span><span class="k">:</span> <span class="kt">RequestHeader</span><span class="o">)</span><span class="k">:</span> <span class="o">(</span><span class="kt">Option</span><span class="o">[</span><span class="kt">Txt</span><span class="o">],</span> <span class="nc">Option</span><span class="o">[</span><span class="kt">Html</span><span class="o">])</span> <span class="k">=</span> <span class="o">{</span>
    <span class="o">(</span><span class="nc">None</span><span class="o">,</span> <span class="nc">Some</span><span class="o">(</span><span class="n">views</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">custom</span><span class="o">.</span><span class="n">mails</span><span class="o">.</span><span class="n">passwordChangedNotice</span><span class="o">(</span><span class="n">user</span><span class="o">)))</span>
  <span class="o">}</span>


  <span class="cm">/**</span>
<span class="cm">   * Returns the html of the Not Authorized page</span>
<span class="cm">   *</span>
<span class="cm">   * @param request the current http request</span>
<span class="cm">   * @return a String with the text and/or html body for the email</span>
<span class="cm">   */</span>
  <span class="k">def</span> <span class="n">getNotAuthorizedPage</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="k">implicit</span> <span class="n">request</span><span class="k">:</span> <span class="kt">Request</span><span class="o">[</span><span class="kt">A</span><span class="o">])</span><span class="k">:</span> <span class="kt">Html</span> <span class="o">=</span> <span class="o">{</span>
     <span class="n">views</span><span class="o">.</span><span class="n">html</span><span class="o">.</span><span class="n">custom</span><span class="o">.</span><span class="n">mails</span><span class="o">.</span><span class="n">notAuthorizedPage</span><span class="o">()</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></div>

<p><em>Note: This plugin is only exposed in the Scala language because the implementation is really trivial and usually will be just changing one line to invoke your own view instead of the provided ones.  It makes no sense in this case to provide a Java version.</em></p>

<h2 id="important">Important</h2>

<p>The templates that come with SecureSocial build URLs using http or https depending on how the <code>ssl</code> property was set in the <code>securesocial.conf</code> file.  For example, in the sign up page you can find the url used by the form is built as:</p>

<div class="highlight"><pre><span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"@securesocial.core.providers.utils.RoutesHelper.handleSignUp(token).absoluteURL(IdentityProvider.sslEnabled)"</span>
</pre></div>

<p><strong>Make sure you do it the same way in your templates.</strong></p>

            
        </div>
      </div>    
    </div>
    <div id="push"></div>
    </div>
    <div id="footer">
	<div class="container">
		<p> <a href="https://github.com/jaliss/securesocial">View on Github</a></p>        
        <p>Designed and developed by <a href="http://twitter.com/jaliss" target="_blank">@jaliss</a>.</p>
        <p>Code licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache License v2.0</a>, documentation under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.</p>
        <p>© 2011-2013 Jorge Aliss       
    </p>
</div>
       
</div>
      
    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1441023-12']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>
